<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment PowerKit - Live Data</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; min-height: 100vh; }
        .container { max-width: 1000px; margin: 0 auto; background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; backdrop-filter: blur(10px); }
        h1 { text-align: center; margin-bottom: 30px; font-size: 2.5rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .disclaimer { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; font-weight: bold; }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #495057; }
        input { width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 16px; background: rgba(255,255,255,0.9); }
        button { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s ease; margin: 10px 5px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .results { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin-top: 20px; }
        .metric-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .metric-card { background: white; border-radius: 8px; padding: 15px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .metric-value { font-size: 1.8rem; font-weight: bold; color: #667eea; }
        .metric-label { color: #6c757d; font-size: 0.9rem; }
        .alert { padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid; }
        .alert-success { background: rgba(40, 167, 69, 0.2); border-left-color: #28a745; }
        .alert-warning { background: rgba(255, 193, 7, 0.2); border-left-color: #ffc107; }
        .loading { text-align: center; padding: 20px; color: #667eea; }
        @media (max-width: 768px) { .container { padding: 15px; } h1 { font-size: 2rem; } .metric-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Investment PowerKit - Live Data</h1>
        <div class="disclaimer">
            ‚ö†Ô∏è EDUCATIONAL TOOL ONLY - Not Financial Advice | API Key: 9oMSUAK0QYT4Y4RQ
        </div>
        
        <div class="input-group">
            <label for="symbol">Enter Stock Symbol:</label>
            <input type="text" id="symbol" placeholder="e.g., AAPL" value="AAPL">
        </div>
        
        <button onclick="loadStockData()">Get Live Stock Data</button>
        <button onclick="testAPI()">Test API Connection</button>
        
        <div id="results" class="results">
            <div class="loading">Click "Get Live Stock Data" to start!</div>
        </div>
    </div>

    <script>
        // üö® YOUR WORKING API KEY üö®
        let API_KEY = '9oMSUAK0QYT4Y4RQ'; // Your working key!

        async function loadStockData() {
            const symbol = document.getElementById('symbol').value.toUpperCase();
            if (!symbol) {
                alert('Please enter a stock symbol');
                return;
            }

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="loading">üîÑ Loading real stock data...</div>';

            try {
                // REAL API CALL TO ALPHA VANTAGE
                const response = await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${API_KEY}`);
                const data = await response.json();
                
                console.log('API Response:', data); // For debugging

                if (data['Global Quote']) {
                    const quote = data['Global Quote'];
                    displayStockData(symbol, quote);
                } else if (data.Note) {
                    resultsDiv.innerHTML = '<div class="alert alert-warning">‚ö†Ô∏è API rate limit reached. Using demo data.</div>';
                    displayDemoData(symbol);
                } else {
                    resultsDiv.innerHTML = '<div class="alert alert-warning">‚ùå No data found for this symbol.</div>';
                }
            } catch (error) {
                console.error('Error:', error);
                resultsDiv.innerHTML = '<div class="alert alert-warning">‚ùå Connection error. Using demo data.</div>';
                displayDemoData(symbol);
            }
        }

        function displayStockData(symbol, quote) {
            const price = parseFloat(quote['05. price']);
            const change = parseFloat(quote['09. change']);
            const changePercent = quote['10. change percent'];
            const volume = parseInt(quote['06. volume']);
            const high = parseFloat(quote['03. high']);
            const low = parseFloat(quote['04. low']);

            const changeColor = change >= 0 ? '#28a745' : '#dc3545';
            const changeSymbol = change >= 0 ? '+' : '';

            resultsDiv.innerHTML = `
                <h3>üìä ${symbol} - LIVE DATA</h3>
                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-value">$${price.toFixed(2)}</div>
                        <div class="metric-label">Current Price</div>
                    </div>
                    <div class="metric-card" style="border-left: 4px solid ${changeColor}">
                        <div class="metric-value" style="color: ${changeColor}">
                            ${changeSymbol}${change.toFixed(2)}
                        </div>
                        <div class="metric-label">Change (${changeSymbol}${changePercent})</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${volume.toLocaleString()}</div>
                        <div class="metric-label">Volume</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">$${high.toFixed(2)}</div>
                        <div class="metric-label">Day High</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">$${low.toFixed(2)}</div>
                        <div class="metric-label">Day Low</div>
                    </div>
                </div>
                
                <div class="alert alert-success" style="margin-top: 20px;">
                    <strong>‚úÖ SUCCESS!</strong> Real-time data from Alpha Vantage API
                    <br><strong>Last Updated:</strong> ${new Date().toLocaleTimeString()}
                </div>
            `;
        }

        function displayDemoData(symbol) {
            // Fallback demo data
            const price = 150 + (Math.random() * 100);
            const change = (Math.random() * 10 - 5);
            const changePercent = ((change / price) * 100).toFixed(2);
            const volume = Math.floor(Math.random() * 50000000 + 10000000);

            resultsDiv.innerHTML = `
                <h3>üìä ${symbol} - DEMO DATA</h3>
                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-value">$${price.toFixed(2)}</div>
                        <div class="metric-label">Demo Price</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${change.toFixed(2)} (${changePercent}%)</div>
                        <div class="metric-label">Demo Change</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${volume.toLocaleString()}</div>
                        <div class="metric-label">Demo Volume</div>
                    </div>
                </div>
                
                <div class="alert alert-warning" style="margin-top: 20px;">
                    <strong>‚ö†Ô∏è DEMO DATA:</strong> Using simulated data. Try again in 60 seconds for real data.
                </div>
            `;
        }

        function testAPI() {
            loadStockData(); // Same function, different button name
        }

        // Auto-load AAPL when page opens
        window.onload = function() {
            setTimeout(() => {
                loadStockData();
            }, 1500); // Auto-load after 1.5 seconds
        };
    </script>
</body>
</html>